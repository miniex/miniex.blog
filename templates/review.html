{% extends "_base.html" %} {% import "_components.html" as components %} {%
block head %}
<title>{{ blog.title }}</title>
<meta name="description" content="{{ blog.description }}" />
<meta property="og:title" content="{{ blog.title }}" />
<meta property="og:description" content="{{ blog.description }}" />
<meta property="og:type" content="{{ blog.og_type }}" />
<meta property="og:url" content="{{ blog.url }}" />
<meta property="og:site_name" content="miniex.blog" />
<meta property="og:image" content="https://miniex.blog/assets/favicon/sakura-flower-512-238032.png" />
<meta property="og:locale" content="{{ lang.as_str() }}" />
<link rel="canonical" href="{{ blog.url }}" />
{% endblock %} {% block main %}
<div class="container mx-auto px-4 max-w-4xl">
  <h1
    class="text-3xl sm:text-4xl font-bold text-center my-10 text-base-content/80"
  >
    {{ t.review_title }}
  </h1>

  <!-- Inline Search Bar -->
  <div
    class="mb-8 cursor-pointer search-trigger"
    onclick="
      document.getElementById('search-modal').showModal();
      setTimeout(function () {
        document.getElementById('search-input').focus();
      }, 100);
    "
  >
    <div class="relative group">
      <div
        class="absolute -inset-0.5 bg-gradient-to-r from-primary/15 to-secondary/15 rounded-3xl blur opacity-0 group-hover:opacity-100 transition-all duration-500"
      ></div>
      <div
        class="relative flex items-center gap-3 bg-base-100/80 backdrop-blur-sm rounded-3xl px-5 py-3.5 border border-base-300/25 group-hover:border-primary/30 transition-all duration-300 shadow-sm group-hover:shadow-lg"
      >
        <div
          class="flex-shrink-0 w-10 h-10 rounded-2xl bg-gradient-to-br from-primary/8 to-secondary/8 flex items-center justify-center group-hover:from-primary/20 group-hover:to-secondary/20 transition-all duration-300"
        >
          <i
            class="ph ph-magnifying-glass text-lg text-primary/50 group-hover:text-primary transition-colors duration-300"
          ></i>
        </div>
        <span class="flex-1 text-base-content/40 text-sm"
          >{{ t.search_placeholder }}</span
        >
        <div
          class="flex items-center gap-1 opacity-60 group-hover:opacity-100 transition-opacity duration-300"
        >
          <kbd
            class="kbd kbd-sm bg-base-200/60 border-base-300/30 text-[10px] font-medium px-1.5 py-0.5 min-h-0 h-5"
            >⌘</kbd
          >
          <kbd
            class="kbd kbd-sm bg-base-200/60 border-base-300/30 text-[10px] font-medium px-1.5 py-0.5 min-h-0 h-5"
            >K</kbd
          >
        </div>
      </div>
    </div>
  </div>

  <div id="sort-content">
  <!-- Category Filter -->
  <div
    class="mb-10 bg-base-100/80 backdrop-blur-sm rounded-3xl px-5 py-4 border border-base-300/25"
  >
    <div class="flex flex-wrap items-center gap-2">
      <span class="text-sm text-base-content/40 mr-1"
        >{{ t.filter_by_category }}</span
      >
      <a
        href="/review"
        class="bg-gradient-to-r from-primary to-secondary text-white rounded-full px-4 py-1.5 text-sm font-medium shadow-sm shadow-primary/20 transition-all hover:shadow-md"
        >{{ t.filter_all }}</a
      >

      {% for category in categories %}
      <a
        href="?category={{ category }}{% if sort_asc %}&sort=asc{% endif %}"
        class="bg-primary/6 hover:bg-primary/12 text-base-content/70 hover:text-primary rounded-full px-4 py-1.5 text-sm transition-all duration-200"
        >{{ category }}</a
      >
      {% endfor %}

      <span class="flex-grow"></span>
      {% if sort_asc %}
      <a
        hx-get="?sort=desc{% if let Some(cat) = current_category %}&category={{ cat }}{% endif %}"
        hx-target="#sort-content"
        hx-select="#sort-content"
        hx-swap="outerHTML transition:true"
        hx-push-url="true"
        class="flex items-center gap-1.5 bg-primary/6 hover:bg-primary/12 text-base-content/70 hover:text-primary rounded-full px-4 py-1.5 text-sm transition-all duration-200 cursor-pointer"
      >
        <i class="ph ph-sort-ascending text-sm"></i>
        {{ t.sort_oldest_first }}
      </a>
      {% else %}
      <a
        hx-get="?sort=asc{% if let Some(cat) = current_category %}&category={{ cat }}{% endif %}"
        hx-target="#sort-content"
        hx-select="#sort-content"
        hx-swap="outerHTML transition:true"
        hx-push-url="true"
        class="flex items-center gap-1.5 bg-primary/6 hover:bg-primary/12 text-base-content/70 hover:text-primary rounded-full px-4 py-1.5 text-sm transition-all duration-200 cursor-pointer"
      >
        <i class="ph ph-sort-descending text-sm"></i>
        {{ t.sort_newest_first }}
      </a>
      {% endif %}
    </div>
  </div>

  <!-- Blog Posts -->
  <div class="grid grid-cols-1 gap-6">
    {% if posts.len() > 0 %} {% for post in posts %} {% call
    components::post_card(post=post) %} {% endfor %} {% else %}
    <div class="flex flex-col items-center justify-center py-20 text-center">
      <i class="ph ph-star text-5xl text-primary/15 mb-4"></i>
      <h3 class="text-lg font-semibold mb-1">{{ t.no_posts_available }}</h3>
      <p class="text-sm text-base-content/45">{{ t.index_check_back }}</p>
    </div>
    {% endif %}
  </div>

  <!-- Pagination -->
  <div class="flex justify-center mt-10 mb-4">
    <div class="join">
      {% if let Some(prev) = prev_page %}
      <a
        href="?page={{ prev }}"
        class="join-item btn btn-sm hover:bg-primary/8 hover:text-primary"
        >«</a
      >
      {% endif %} {% for page_num in page_numbers %}
      <a
        href="?page={{ page_num }}"
        class="join-item btn btn-sm hover:bg-primary/8 hover:text-primary {% if current_page|to_ref == page_num %}btn-active{% endif %}"
        >{{ page_num }}</a
      >
      {% endfor %} {% if let Some(next) = next_page %}
      <a
        href="?page={{ next }}"
        class="join-item btn btn-sm hover:bg-primary/8 hover:text-primary"
        >»</a
      >
      {% endif %}
    </div>
  </div>
  </div>
</div>
{% endblock %}
