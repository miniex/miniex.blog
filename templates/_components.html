{% macro post_card(post) %}
<a href="/post/{{ post.slug }}" class="group block h-full">
  <div
    class="bg-base-100 rounded-3xl border border-base-300/25 shadow-sm shadow-primary/5 hover:shadow-lg hover:shadow-primary/10 hover:-translate-y-1 transition-all duration-300 h-full flex flex-col"
  >
    <div
      class="h-0.5 bg-gradient-to-r from-primary/30 via-secondary/20 to-accent/30 rounded-t-3xl"
    ></div>
    <div class="p-5 sm:p-6 flex flex-col flex-grow">
      <!-- Top section with type, series, and date -->
      <div
        class="flex flex-col sm:flex-row sm:justify-between items-start gap-2 mb-4"
      >
        <div class="flex flex-wrap gap-2">
          <span
            class="badge badge-sm bg-primary/8 text-primary border-none font-medium"
          >
            {{ post.post_type }}
          </span>
          {% if let Some(series) = post.metadata.series %}
          <span
            class="badge badge-sm bg-secondary/8 text-secondary border-none font-medium"
          >
            {{ series }}
          </span>
          {% endif %}
          <span
            class="badge badge-sm bg-accent/8 text-accent border-none font-medium"
          >
            {{ post.lang.code() }}
          </span>
        </div>
        <div
          class="text-xs text-base-content/50 font-medium flex flex-col sm:flex-row sm:gap-1"
        >
          <time>{{ post.metadata.created_at|date }}</time>
          <span class="hidden sm:inline text-base-content/30"> Â· </span>
          <time class="text-base-content/40"
            >{{ t.post_updated }} {{ post.metadata.updated_at|date }}</time
          >
        </div>
      </div>

      <!-- Title -->
      <h3
        class="text-lg font-semibold mb-3 text-base-content group-hover:text-primary transition-colors duration-200"
      >
        {{ post.metadata.title }}
      </h3>

      <!-- Description -->
      <p
        class="text-sm text-base-content/55 mb-4 line-clamp-2 flex-grow leading-relaxed"
      >
        {{ post.metadata.description|truncate(120) }}
      </p>

      <!-- Bottom section: tags + read more -->
      <div class="mt-auto pt-4 border-t border-base-300/20 space-y-3">
        <!-- Tags -->
        <div class="flex flex-wrap gap-1.5">
          {% set tag_count = 0 %} {% for tag in post.metadata.tags %} {% if
          tag_count < 3 %}
          <span
            class="badge badge-sm text-xs bg-primary/5 text-primary/70 border-none"
            >{{ tag }}</span
          >
          {% endif %} {% set tag_count = tag_count + 1 %} {% endfor %} {% if
          tag_count > 3 %}
          <span
            class="badge badge-sm text-xs bg-primary/5 text-primary/70 border-none"
            >+{{ tag_count - 3 }}</span
          >
          {% endif %}
        </div>

        <!-- Read more -->
        <div class="flex justify-end">
          <span
            class="inline-flex items-center gap-1 text-sm font-medium text-primary/70 group-hover:text-primary transition-colors duration-200"
          >
            {{ t.card_read_more }}
            <i
              class="ph ph-arrow-right text-sm transform group-hover:translate-x-0.5 transition-transform duration-200"
            ></i>
          </span>
        </div>
      </div>
    </div>
  </div>
</a>
{% endmacro %}
